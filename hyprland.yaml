impl: 'https://github.com/blend-os/tracks/raw/main'

track: 'blendos-base'

packages: 
  - 'paru'
  - 'pacman'
aur-packages:
  - 'qemu-full'
  - 'virt-manager'
  - 'linutil-bin'
  - 'networkmanager'

commands:
  - "if ! id 'libvirt-qemu' &>/dev/null; then sudo useradd -r -s /sbin/nologin libvirt-qemu; fi"
  - "if ! groups libvirt-qemu | grep -q kvm; then sudo usermod -aG kvm libvirt-qemu; fi"
  - "if ! getent group libvirt; then sudo groupadd libvirt; fi"
  - "if ! groups libvirt-qemu | grep -q libvirt; then sudo usermod -aG libvirt libvirt-qemu; fi"
  - "sudo localectl set-locale nl_NL.UTF-8"
  - "sudo locale-gen"
  - "git clone https://github.com/linkfrg/dotfiles.git --depth 1 --branch main"
  - "cd dotfiles"
  - "mkdir -p ~/.local/share/themes"
  - "cp -R .config/* ~/.config/"
  - "cp -R ignis ~/.config/"
  - "cp -R Material ~/.local/share/themes"
  - "paru -S --needed - < dependencies.txt"

services:
  - 'libvirtd'
  - 'libvirt-storaged'
  - 'sddm'
  - 'NetworkManager'